import{b as le,k as xe,q as Ge,U as Je,r as Ze,s as ue,v as ye,w as he,i as me,x as pe,y as Xe,m as Ye,d as Fe}from"./index.CHsZHsEM.js";import{s as ne,y as ee,z as te,a as M,d as u,f as c,i as B,g,n as se,B as Ne,E as Ue,j as x,p as $e,G as Oe,r as De,k as N,o as U,v as Ve,w as ze,x as He,e as S,t as O,l as Te,c as I,A as ae,b as D,u as J,h as V,F as Pe,q as Ke}from"./scheduler.DB3Sqaa-.js";import{S as re,i as oe,f as We,b as Z,d as X,m as Y,t as H,a as W,e as F,g as Re,c as qe}from"./index.CZN8UBAJ.js";import{T as Qe}from"./create.CvIXhe-7.js";import{M as et,a as tt,b as st}from"./menu-trigger.BEiGG1zf.js";import{g as Ce}from"./entry.DONEOOkV.js";import{f as at}from"./index.BronEFe7.js";import{b as lt,c as nt,u as Ee,d as Se,e as fe,f as rt,h as ot,i as ge,s as it,j as ct}from"./index.vR5RHCSJ.js";import{T as ut}from"./Tags.DrNYEDhh.js";import{t as Ie}from"./Toaster.svelte_svelte_type_style_lang.C-7zrEBl.js";import{i as ft}from"./index.ByHfthl-.js";import{M as dt}from"./Modal.pDJBaGK4.js";const Yt=async l=>{let e=null;const s=await fetch(`${le}/memories/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return s},Ft=async(l,e)=>{let s=null;const t=await fetch(`${le}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(s=a.detail,console.log(a),null));if(s)throw s;return t},Kt=async(l,e,s)=>{let t=null;const a=await fetch(`${le}/memories/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:s})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(t=n.detail,console.log(n),null));if(t)throw t;return a},Qt=async(l,e)=>{let s=null;const t=await fetch(`${le}/memories/query`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(s=a.detail,console.log(a),null));if(s)throw s;return t},es=async(l,e)=>{let s=null;const t=await fetch(`${le}/memories/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).then(a=>a).catch(a=>(s=a.detail,console.log(a),null));if(s)throw s;return t},ts=async l=>{let e=null;const s=await fetch(`${le}/memories/delete/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return s};function ht(l){let e,s;return{c(){e=ee("svg"),s=ee("path"),this.h()},l(t){e=te(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=M(e);s=te(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(s).forEach(u),a.forEach(u),this.h()},h(){c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(s,"d","m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(t,a){B(t,e,a),g(e,s)},p(t,[a]){a&2&&c(e,"stroke-width",t[1]),a&1&&c(e,"class",t[0])},i:se,o:se,d(t){t&&u(e)}}}function mt(l,e,s){let{className:t="size-3.5"}=e,{strokeWidth:a="2.5"}=e;return l.$$set=n=>{"className"in n&&s(0,t=n.className),"strokeWidth"in n&&s(1,a=n.strokeWidth)},[t,a]}class pt extends re{constructor(e){super(),oe(this,e,mt,ht,ne,{className:0,strokeWidth:1})}}const gt=l=>({}),Me=l=>({});function _t(l){let e;const s=l[9].default,t=De(s,l,l[18],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&262144)&&Ve(t,s,a,a[18],e?He(s,a[18],n,null):ze(a[18]),null)},i(a){e||(H(t,a),e=!0)},o(a){W(t,a),e=!1},d(a){t&&t.d(a)}}}function Be(l){let e,s,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"></path></svg>',a,n,r=l[4].t("Playground")+"",o,f,p,w,b='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',m,d,_=l[4].t("Admin Panel")+"",y,C,k;return{c(){e=S("button"),s=S("div"),s.innerHTML=t,a=N(),n=S("div"),o=O(r),f=N(),p=S("button"),w=S("div"),w.innerHTML=b,m=N(),d=S("div"),y=O(_),this.h()},l(j){e=I(j,"BUTTON",{class:!0});var h=M(e);s=I(h,"DIV",{class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-4ehrk0"&&(s.innerHTML=t),a=U(h),n=I(h,"DIV",{class:!0});var E=M(n);o=D(E,r),E.forEach(u),h.forEach(u),f=U(j),p=I(j,"BUTTON",{class:!0});var A=M(p);w=I(A,"DIV",{class:!0,"data-svelte-h":!0}),ae(w)!=="svelte-1vodyax"&&(w.innerHTML=b),m=U(A),d=I(A,"DIV",{class:!0});var i=M(d);y=D(i,_),i.forEach(u),A.forEach(u),this.h()},h(){c(s,"class","self-center mr-3"),c(n,"class","self-center font-medium"),c(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(w,"class","self-center mr-3"),c(d,"class","self-center font-medium"),c(p,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(j,h){B(j,e,h),g(e,s),g(e,a),g(e,n),g(n,o),B(j,f,h),B(j,p,h),g(p,w),g(p,m),g(p,d),g(d,y),C||(k=[J(e,"click",l[12]),J(p,"click",l[13])],C=!0)},p(j,h){h&16&&r!==(r=j[4].t("Playground")+"")&&V(o,r),h&16&&_!==(_=j[4].t("Admin Panel")+"")&&V(y,_)},d(j){j&&(u(e),u(f),u(p)),C=!1,Pe(k)}}}function je(l){let e,s,t,a;return t=new Qe({props:{content:l[6]&&l[6].length>0?`${l[4].t("Running")}: ${l[6].join(", ")} ✨`:"",$$slots:{default:[wt]},$$scope:{ctx:l}}}),{c(){e=S("hr"),s=N(),Z(t.$$.fragment),this.h()},l(n){e=I(n,"HR",{class:!0}),s=U(n),X(t.$$.fragment,n),this.h()},h(){c(e,"class","dark:border-gray-800 my-1.5 p-0")},m(n,r){B(n,e,r),B(n,s,r),Y(t,n,r),a=!0},p(n,r){const o={};r&80&&(o.content=n[6]&&n[6].length>0?`${n[4].t("Running")}: ${n[6].join(", ")} ✨`:""),r&262192&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){a||(H(t.$$.fragment,n),a=!0)},o(n){W(t.$$.fragment,n),a=!1},d(n){n&&(u(e),u(s)),F(t,n)}}}function wt(l){let e,s,t='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',a,n,r,o=l[4].t("Active Users")+"",f,p,w,b,m;return{c(){e=S("div"),s=S("div"),s.innerHTML=t,a=N(),n=S("div"),r=S("span"),f=O(o),p=O(":"),w=N(),b=S("span"),m=O(l[5]),this.h()},l(d){e=I(d,"DIV",{class:!0});var _=M(e);s=I(_,"DIV",{class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-dl2p8d"&&(s.innerHTML=t),a=U(_),n=I(_,"DIV",{class:!0});var y=M(n);r=I(y,"SPAN",{class:!0});var C=M(r);f=D(C,o),p=D(C,":"),C.forEach(u),w=U(y),b=I(y,"SPAN",{class:!0});var k=M(b);m=D(k,l[5]),k.forEach(u),y.forEach(u),_.forEach(u),this.h()},h(){c(s,"class","flex items-center"),c(r,"class","font-medium"),c(b,"class","font-semibold"),c(n,"class",""),c(e,"class","flex rounded-md py-1.5 px-3 text-xs gap-2.5 items-center")},m(d,_){B(d,e,_),g(e,s),g(e,a),g(e,n),g(n,r),g(r,f),g(r,p),g(n,w),g(n,b),g(b,m)},p(d,_){_&16&&o!==(o=d[4].t("Active Users")+"")&&V(f,o),_&32&&V(m,d[5])},d(d){d&&u(e)}}}function vt(l){let e,s,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',a,n,r=l[4].t("Settings")+"",o,f,p,w,b,m,d,_=l[4].t("Archived Chats")+"",y,C,k,j,h,E,A,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z" clip-rule="evenodd"></path></svg>',T,P,R=l[4].t("Sign Out")+"",K,G,q,Q,de,_e;b=new pt({props:{className:"size-5",strokeWidth:"1.5"}});let z=l[1]==="admin"&&Be(l),$=l[5]&&je(l);return{c(){e=S("button"),s=S("div"),s.innerHTML=t,a=N(),n=S("div"),o=O(r),f=N(),p=S("button"),w=S("div"),Z(b.$$.fragment),m=N(),d=S("div"),y=O(_),C=N(),z&&z.c(),k=N(),j=S("hr"),h=N(),E=S("button"),A=S("div"),A.innerHTML=i,T=N(),P=S("div"),K=O(R),G=N(),$&&$.c(),q=Te(),this.h()},l(v){e=I(v,"BUTTON",{class:!0});var L=M(e);s=I(L,"DIV",{class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-1ew1v3e"&&(s.innerHTML=t),a=U(L),n=I(L,"DIV",{class:!0});var we=M(n);o=D(we,r),we.forEach(u),L.forEach(u),f=U(v),p=I(v,"BUTTON",{class:!0});var ie=M(p);w=I(ie,"DIV",{class:!0});var ve=M(w);X(b.$$.fragment,ve),ve.forEach(u),m=U(ie),d=I(ie,"DIV",{class:!0});var ke=M(d);y=D(ke,_),ke.forEach(u),ie.forEach(u),C=U(v),z&&z.l(v),k=U(v),j=I(v,"HR",{class:!0}),h=U(v),E=I(v,"BUTTON",{class:!0});var ce=M(E);A=I(ce,"DIV",{class:!0,"data-svelte-h":!0}),ae(A)!=="svelte-1svlfdm"&&(A.innerHTML=i),T=U(ce),P=I(ce,"DIV",{class:!0});var be=M(P);K=D(be,R),be.forEach(u),ce.forEach(u),G=U(v),$&&$.l(v),q=Te(),this.h()},h(){c(s,"class","self-center mr-3"),c(n,"class","self-center font-medium"),c(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(w,"class","self-center mr-3"),c(d,"class","self-center font-medium"),c(p,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(j,"class","dark:border-gray-800 my-1.5 p-0"),c(A,"class","self-center mr-3"),c(P,"class","self-center font-medium"),c(E,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(v,L){B(v,e,L),g(e,s),g(e,a),g(e,n),g(n,o),B(v,f,L),B(v,p,L),g(p,w),Y(b,w,null),g(p,m),g(p,d),g(d,y),B(v,C,L),z&&z.m(v,L),B(v,k,L),B(v,j,L),B(v,h,L),B(v,E,L),g(E,A),g(E,T),g(E,P),g(P,K),B(v,G,L),$&&$.m(v,L),B(v,q,L),Q=!0,de||(_e=[J(e,"click",l[10]),J(p,"click",l[11]),J(E,"click",l[14])],de=!0)},p(v,L){(!Q||L&16)&&r!==(r=v[4].t("Settings")+"")&&V(o,r),(!Q||L&16)&&_!==(_=v[4].t("Archived Chats")+"")&&V(y,_),v[1]==="admin"?z?z.p(v,L):(z=Be(v),z.c(),z.m(k.parentNode,k)):z&&(z.d(1),z=null),(!Q||L&16)&&R!==(R=v[4].t("Sign Out")+"")&&V(K,R),v[5]?$?($.p(v,L),L&32&&H($,1)):($=je(v),$.c(),H($,1),$.m(q.parentNode,q)):$&&(Re(),W($,1,1,()=>{$=null}),qe())},i(v){Q||(H(b.$$.fragment,v),H($),Q=!0)},o(v){W(b.$$.fragment,v),W($),Q=!1},d(v){v&&(u(e),u(f),u(p),u(C),u(k),u(j),u(h),u(E),u(G),u(q)),F(b),z&&z.d(v),$&&$.d(v),de=!1,Pe(_e)}}}function kt(l){let e,s;return e=new st({props:{class:"w-full "+l[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow font-primary",sideOffset:8,side:"bottom",align:"start",transition:l[15],$$slots:{default:[vt]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),s=!0},p(t,a){const n={};a&4&&(n.class="w-full "+t[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow font-primary"),a&262267&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){W(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function bt(l){let e,s,t;e=new tt({props:{$$slots:{default:[_t]},$$scope:{ctx:l}}});const a=l[9].content,n=De(a,l,l[18],Me),r=n||kt(l);return{c(){Z(e.$$.fragment),s=N(),r&&r.c()},l(o){X(e.$$.fragment,o),s=U(o),r&&r.l(o)},m(o,f){Y(e,o,f),B(o,s,f),r&&r.m(o,f),t=!0},p(o,f){const p={};f&262144&&(p.$$scope={dirty:f,ctx:o}),e.$set(p),n?n.p&&(!t||f&262144)&&Ve(n,a,o,o[18],t?He(a,o[18],f,gt):ze(o[18]),Me):r&&r.p&&(!t||f&127)&&r.p(o,t?f:-1)},i(o){t||(H(e.$$.fragment,o),H(r,o),t=!0)},o(o){W(e.$$.fragment,o),W(r,o),t=!1},d(o){o&&u(s),F(e,o),r&&r.d(o)}}}function yt(l){let e,s,t;function a(r){l[17](r)}let n={onOpenChange:l[16],$$slots:{default:[bt]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.open=l[0]),e=new et({props:n}),Ne.push(()=>We(e,"open",a)),{c(){Z(e.$$.fragment)},l(r){X(e.$$.fragment,r)},m(r,o){Y(e,r,o),t=!0},p(r,[o]){const f={};o&262271&&(f.$$scope={dirty:o,ctx:r}),!s&&o&1&&(s=!0,f.open=r[0],Ue(()=>s=!1)),e.$set(f)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){W(e.$$.fragment,r),t=!1},d(r){F(e,r)}}}function Tt(l,e,s){let t,a,n,r;x(l,xe,i=>s(3,t=i)),x(l,Ge,i=>s(5,n=i)),x(l,Je,i=>s(6,r=i));let{$$slots:o={},$$scope:f}=e;const p=$e("i18n");x(l,p,i=>s(4,a=i));let{show:w=!1}=e,{role:b=""}=e,{className:m="max-w-[240px]"}=e;const d=Oe(),_=async()=>{await Ze.set(!0),s(0,w=!1),t&&ue.set(!1)},y=()=>{d("show","archived-chat"),s(0,w=!1),t&&ue.set(!1)},C=()=>{Ce("/playground"),s(0,w=!1),t&&ue.set(!1)},k=()=>{Ce("/admin"),s(0,w=!1),t&&ue.set(!1)},j=()=>{localStorage.removeItem("token"),location.href="/auth",s(0,w=!1)},h=i=>at(i,{duration:100}),E=i=>{d("change",i)};function A(i){w=i,s(0,w)}return l.$$set=i=>{"show"in i&&s(0,w=i.show),"role"in i&&s(1,b=i.role),"className"in i&&s(2,m=i.className),"$$scope"in i&&s(18,f=i.$$scope)},[w,b,m,t,a,n,r,p,d,o,_,y,C,k,j,h,E,A,f]}class ss extends re{constructor(e){super(),oe(this,e,Tt,yt,ne,{show:0,role:1,className:2})}}function Ct(l){let e,s;return e=new ut({props:{tags:l[0],deleteTag:l[2],addTag:l[1]}}),{c(){Z(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,a){Y(e,t,a),s=!0},p(t,[a]){const n={};a&1&&(n.tags=t[0]),e.$set(n)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){W(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function Et(l,e,s){let t,a,n;x(l,ye,m=>s(4,t=m)),x(l,he,m=>s(5,a=m)),x(l,me,m=>s(6,n=m));const r=Oe();let{chatId:o=""}=e,f=[];const p=async()=>(await lt(localStorage.token,o).catch(async m=>[])).filter(m=>m.name!=="pinned"),w=async m=>{await nt(localStorage.token,o,m),s(0,f=await p()),await Ee(localStorage.token,o,{tags:f}),me.set(await Se(localStorage.token)),await pe.set(await fe(localStorage.token,"pinned"))},b=async m=>{await rt(localStorage.token,o,m),s(0,f=await p()),await Ee(localStorage.token,o,{tags:f}),await me.set(await Se(localStorage.token)),n.map(d=>d.name).includes(m)?(m==="pinned"?await pe.set(await fe(localStorage.token,"pinned")):await he.set(await fe(localStorage.token,m)),a.find(d=>d.id===o)&&r("close")):(ye.set(1),await he.set(await ot(localStorage.token,t)),await pe.set(await fe(localStorage.token,"pinned")),await Xe.set(!0))};return Ke(async()=>{o&&s(0,f=await p())}),l.$$set=m=>{"chatId"in m&&s(3,o=m.chatId)},[f,w,b,o]}class as extends re{constructor(e){super(),oe(this,e,Et,Ct,ne,{chatId:3})}}function St(l){let e,s,t;return{c(){e=ee("svg"),s=ee("path"),t=ee("path"),this.h()},l(a){e=te(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=M(e);s=te(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(s).forEach(u),t=te(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(t).forEach(u),n.forEach(u),this.h()},h(){c(s,"fill-rule","evenodd"),c(s,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),c(s,"clip-rule","evenodd"),c(t,"fill-rule","evenodd"),c(t,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),c(t,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 16 16"),c(e,"fill","currentColor"),c(e,"class",l[0])},m(a,n){B(a,e,n),g(e,s),g(e,t)},p(a,[n]){n&1&&c(e,"class",a[0])},i:se,o:se,d(a){a&&u(e)}}}function It(l,e,s){let{className:t="w-4 h-4"}=e;return l.$$set=a=>{"className"in a&&s(0,t=a.className)},[t]}class Mt extends re{constructor(e){super(),oe(this,e,It,St,ne,{className:0})}}function Ae(l){var A;let e,s,t,a,n,r,o,f,p,w,b,m,d;function _(i,T){return i[2].share_id?jt:Bt}let y=_(l),C=y(l),k=((A=l[4])==null?void 0:A.features.enable_community_sharing)&&Le(l);p=new Mt({});function j(i,T){return i[2].share_id?Lt:At}let h=j(l),E=h(l);return{c(){e=S("div"),s=S("div"),C.c(),t=N(),a=S("div"),n=S("div"),r=S("div"),k&&k.c(),o=N(),f=S("button"),Z(p.$$.fragment),w=N(),E.c(),this.h()},l(i){e=I(i,"DIV",{class:!0});var T=M(e);s=I(T,"DIV",{class:!0});var P=M(s);C.l(P),P.forEach(u),t=U(T),a=I(T,"DIV",{class:!0});var R=M(a);n=I(R,"DIV",{class:!0});var K=M(n);r=I(K,"DIV",{class:!0});var G=M(r);k&&k.l(G),o=U(G),f=I(G,"BUTTON",{class:!0,type:!0,id:!0});var q=M(f);X(p.$$.fragment,q),w=U(q),E.l(q),q.forEach(u),G.forEach(u),K.forEach(u),R.forEach(u),T.forEach(u),this.h()},h(){c(s,"class","text-sm dark:text-gray-300 mb-1"),c(f,"class","self-center flex items-center gap-1 px-3.5 py-2 rounded-xl text-sm font-medium bg-emerald-600 hover:bg-emerald-500 text-white"),c(f,"type","button"),c(f,"id","copy-and-share-chat-button"),c(r,"class","flex gap-1"),c(n,"class","flex flex-col items-end space-x-1 mt-1.5"),c(a,"class","flex justify-end"),c(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(i,T){B(i,e,T),g(e,s),C.m(s,null),g(e,t),g(e,a),g(a,n),g(n,r),k&&k.m(r,null),g(r,o),g(r,f),Y(p,f,null),g(f,w),E.m(f,null),b=!0,m||(d=J(f,"click",l[11]),m=!0)},p(i,T){var P;y===(y=_(i))&&C?C.p(i,T):(C.d(1),C=y(i),C&&(C.c(),C.m(s,null))),(P=i[4])!=null&&P.features.enable_community_sharing?k?k.p(i,T):(k=Le(i),k.c(),k.m(r,o)):k&&(k.d(1),k=null),h===(h=j(i))&&E?E.p(i,T):(E.d(1),E=h(i),E&&(E.c(),E.m(f,null)))},i(i){b||(H(p.$$.fragment,i),b=!0)},o(i){W(p.$$.fragment,i),b=!1},d(i){i&&u(e),C.d(),k&&k.d(),F(p),E.d(),m=!1,d()}}}function Bt(l){let e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",s;return{c(){s=O(e)},l(t){s=D(t,e)},m(t,a){B(t,s,a)},p(t,a){a&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&V(s,e)},d(t){t&&u(s)}}}function jt(l){let e,s=l[3].t("You have shared this chat")+"",t,a,n,r=l[3].t("before")+"",o,f,p,w,b=l[3].t("Click here to")+"",m,d,_,y=l[3].t("delete this link")+"",C,k,j=l[3].t("and create a new shared link.")+"",h,E,A;return{c(){e=S("a"),t=O(s),a=N(),n=S("span"),o=O(r),f=O("."),w=N(),m=O(b),d=N(),_=S("button"),C=O(y),k=N(),h=O(j),this.h()},l(i){e=I(i,"A",{href:!0,target:!0});var T=M(e);t=D(T,s),a=U(T),n=I(T,"SPAN",{class:!0});var P=M(n);o=D(P,r),P.forEach(u),f=D(T,"."),T.forEach(u),w=U(i),m=D(i,b),d=U(i),_=I(i,"BUTTON",{class:!0});var R=M(_);C=D(R,y),R.forEach(u),k=U(i),h=D(i,j),this.h()},h(){c(n,"class","underline"),c(e,"href",p="/s/"+l[2].share_id),c(e,"target","_blank"),c(_,"class","underline")},m(i,T){B(i,e,T),g(e,t),g(e,a),g(e,n),g(n,o),g(e,f),B(i,w,T),B(i,m,T),B(i,d,T),B(i,_,T),g(_,C),B(i,k,T),B(i,h,T),E||(A=J(_,"click",l[9]),E=!0)},p(i,T){T&8&&s!==(s=i[3].t("You have shared this chat")+"")&&V(t,s),T&8&&r!==(r=i[3].t("before")+"")&&V(o,r),T&4&&p!==(p="/s/"+i[2].share_id)&&c(e,"href",p),T&8&&b!==(b=i[3].t("Click here to")+"")&&V(m,b),T&8&&y!==(y=i[3].t("delete this link")+"")&&V(C,y),T&8&&j!==(j=i[3].t("and create a new shared link.")+"")&&V(h,j)},d(i){i&&(u(e),u(w),u(m),u(d),u(_),u(k),u(h)),E=!1,A()}}}function Le(l){let e,s=l[3].t("Share to OpenWebUI Community")+"",t,a,n;return{c(){e=S("button"),t=O(s),this.h()},l(r){e=I(r,"BUTTON",{class:!0,type:!0});var o=M(e);t=D(o,s),o.forEach(u),this.h()},h(){c(e,"class","self-center px-3.5 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white"),c(e,"type","button")},m(r,o){B(r,e,o),g(e,t),a||(n=J(e,"click",l[10]),a=!0)},p(r,o){o&8&&s!==(s=r[3].t("Share to OpenWebUI Community")+"")&&V(t,s)},d(r){r&&u(e),a=!1,n()}}}function At(l){let e=l[3].t("Copy Link")+"",s;return{c(){s=O(e)},l(t){s=D(t,e)},m(t,a){B(t,s,a)},p(t,a){a&8&&e!==(e=t[3].t("Copy Link")+"")&&V(s,e)},d(t){t&&u(s)}}}function Lt(l){let e=l[3].t("Update and Copy Link")+"",s;return{c(){s=O(e)},l(t){s=D(t,e)},m(t,a){B(t,s,a)},p(t,a){a&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&V(s,e)},d(t){t&&u(s)}}}function Nt(l){let e,s,t,a=l[3].t("Share Chat")+"",n,r,o,f='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',p,w,b,m,d=l[2]&&Ae(l);return{c(){e=S("div"),s=S("div"),t=S("div"),n=O(a),r=N(),o=S("button"),o.innerHTML=f,p=N(),d&&d.c(),this.h()},l(_){e=I(_,"DIV",{});var y=M(e);s=I(y,"DIV",{class:!0});var C=M(s);t=I(C,"DIV",{class:!0});var k=M(t);n=D(k,a),k.forEach(u),r=U(C),o=I(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-745w2y"&&(o.innerHTML=f),C.forEach(u),p=U(y),d&&d.l(y),y.forEach(u),this.h()},h(){c(t,"class","text-lg font-medium self-center"),c(o,"class","self-center"),c(s,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(_,y){B(_,e,y),g(e,s),g(s,t),g(t,n),g(s,r),g(s,o),g(e,p),d&&d.m(e,null),w=!0,b||(m=J(o,"click",l[8]),b=!0)},p(_,y){(!w||y&8)&&a!==(a=_[3].t("Share Chat")+"")&&V(n,a),_[2]?d?(d.p(_,y),y&4&&H(d,1)):(d=Ae(_),d.c(),H(d,1),d.m(e,null)):d&&(Re(),W(d,1,1,()=>{d=null}),qe())},i(_){w||(H(d),w=!0)},o(_){W(d),w=!1},d(_){_&&u(e),d&&d.d(),b=!1,m()}}}function Ut(l){let e,s,t;function a(r){l[12](r)}let n={size:"sm",$$slots:{default:[Nt]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.show=l[0]),e=new dt({props:n}),Ne.push(()=>We(e,"show",a)),{c(){Z(e.$$.fragment)},l(r){X(e.$$.fragment,r)},m(r,o){Y(e,r,o),t=!0},p(r,[o]){const f={};o&65567&&(f.$$scope={dirty:o,ctx:r}),!s&&o&1&&(s=!0,f.show=r[0],Ue(()=>s=!1)),e.$set(f)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){W(e.$$.fragment,r),t=!1},d(r){F(e,r)}}}function $t(l,e,s){let t,a,n;x(l,Ye,h=>s(14,t=h)),x(l,Fe,h=>s(4,n=h));let{chatId:r}=e,o=null,f=null;const p=$e("i18n");x(l,p,h=>s(3,a=h));const w=async()=>{const h=await it(localStorage.token,r);return f=`${window.location.origin}/s/${h.id}`,console.log(f),s(2,o=await ge(localStorage.token,r)),f},b=async()=>{const h=o.chat;console.log("share",h),Ie.success(a.t("Redirecting you to OpenWebUI Community"));const E="https://openwebui.com",A=await window.open(`${E}/chats/upload`,"_blank");window.addEventListener("message",i=>{i.origin===E&&i.data==="loaded"&&A.postMessage(JSON.stringify({chat:h,models:t.filter(T=>h.models.includes(T.id))}),"*")},!1)};let{show:m=!1}=e;const d=h=>o?h?o.id!==h.id||o.share_id!==h.share_id:!1:!0,_=()=>{s(0,m=!1)},y=async()=>{await ct(localStorage.token,r)&&s(2,o=await ge(localStorage.token,r))},C=()=>{b(),s(0,m=!1)},k=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const E=async()=>{const A=await w();return new Blob([A],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":E()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(A=>(console.error("Async: Could not copy text: ",A),!1))}else ft(await w());Ie.success(a.t("Copied shared chat URL to clipboard!")),s(0,m=!1)};function j(h){m=h,s(0,m)}return l.$$set=h=>{"chatId"in h&&s(1,r=h.chatId),"show"in h&&s(0,m=h.show)},l.$$.update=()=>{l.$$.dirty&7&&m&&(async()=>{if(r){const h=await ge(localStorage.token,r);d(h)&&s(2,o=h)}else s(2,o=null),console.log(o)})()},[m,r,o,a,n,p,w,b,_,y,C,k,j]}class ls extends re{constructor(e){super(),oe(this,e,$t,Ut,ne,{chatId:1,show:0})}}function Ot(l){let e,s;return{c(){e=ee("svg"),s=ee("path"),this.h()},l(t){e=te(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=M(e);s=te(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(s).forEach(u),a.forEach(u),this.h()},h(){c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(s,"d","M6 18 18 6M6 6l12 12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(t,a){B(t,e,a),g(e,s)},p(t,[a]){a&2&&c(e,"stroke-width",t[1]),a&1&&c(e,"class",t[0])},i:se,o:se,d(t){t&&u(e)}}}function Dt(l,e,s){let{className:t="size-3.5"}=e,{strokeWidth:a="2"}=e;return l.$$set=n=>{"className"in n&&s(0,t=n.className),"strokeWidth"in n&&s(1,a=n.strokeWidth)},[t,a]}class ns extends re{constructor(e){super(),oe(this,e,Dt,Ot,ne,{className:0,strokeWidth:1})}}export{pt as A,ls as S,as as T,ss as U,ns as X,Ft as a,ts as b,es as d,Yt as g,Qt as q,Kt as u};
//# sourceMappingURL=XMark.D6d_097Z.js.map
