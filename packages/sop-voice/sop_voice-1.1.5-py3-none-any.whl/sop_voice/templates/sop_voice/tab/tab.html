{% extends "dcim/site.html" %}
{% load static %}
{% load helpers %}
{% load buttons %}
{% load i18n %}


<!--
    __________________________
    add extra controls buttons
-->
{% block extra_controls %}
    <a href="{% url 'plugins:sop_voice:voicesda_add' pk=object.id %}" type="button" class="btn btn-primary">
      <i class="mdi mdi-plus-thick"></i>{% trans "Add DIDs" %}</a>
    <a href="{% url 'plugins:sop_voice:voicesda_import' pk=object.id %}" type="button" class="btn btn-cyan">
        <i class="mdi mdi-upload"></i> {% trans "Import DIDs" %}
    <a href="{% url 'plugins:sop_voice:voicedelivery_add' pk=object.id %}" type="button" class="btn btn-primary">
      <i class="mdi mdi-plus-thick"></i>{% trans "Add voice deliveries" %}</a>
{% endblock extra_controls %}


<!--
    ________________________________
    displays all voice models tables
    using sop_utils/tools/table.html
    and sop_voice/tab/*.html
-->
{% block content %}

<div class="row">
    <div class="col-md-6">
        {% include 'sop_voice/tab/site_info.html' with object=context.site_info site=object %}
    </div>
    <div class="col-md-12">
        {% include 'sop_utils/tools/table.html' with object=context.delivery reversed_url='plugins:sop_voice:voicedelivery_add' pk=object.id %}
        {% include 'sop_utils/tools/table.html' with object=context.sda reversed_url='plugins:sop_voice:voicesda_add' pk=object.id search=1%}
    </div>
</div>

<!--
    ____________________________________________________
    load my scripts for quicksearch, tableconfig and tab
-->
<script src="{% static 'my_tab.js' %}"></script>
<script>
/*
 * just to normalize the string
 */
function lower_case(str)
{
    return str.toLowerCase();
}
 
document.addEventListener('DOMContentLoaded', function ()
{
    const all_tabs = document.querySelectorAll('ul.nav.nav-tabs li.nav-item a');
    update_current_tab_color(all_tabs, "Voice");

    const quicksearch = document.getElementById('quick-search');
    quicksearch.addEventListener('input', function ()
    {
        init_voice_quick_search(quicksearch);
    });

});
</script>

{% endblock content %}
