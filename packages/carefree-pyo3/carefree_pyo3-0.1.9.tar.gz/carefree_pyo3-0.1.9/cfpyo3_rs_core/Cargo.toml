[package]
name = "cfpyo3_rs_core"
version.workspace = true
edition.workspace = true
authors.workspace = true
description.workspace = true
homepage.workspace = true
repository.workspace = true
readme = "README.md"
keywords.workspace = true
categories.workspace = true
license-file.workspace = true

[lib]
name = "cfpyo3_core"
crate-type = ["rlib"]

[dependencies]
futures = "0.3.30"
itertools = "0.13.0"
md-5 = "0.10.6"
num-traits = "0.2.19"
numpy = "0.21.0"
rayon = "1.10.0"

bytes = { version = "1.7.2", optional = true }
opendal = { version = "0.50.0", features = ["services-s3"], optional = true }
redis = { version = "0.26.1", features = [ "cluster" ], optional = true }
tokio = { version = "1.40.0", features = ["full"], optional = true }

[features]
default = []
io-source-s3 = [
    "dep:bytes",
    "dep:opendal",
    "dep:tokio",
]
io-mem-redis = [
    "dep:redis",
]
bench-io-mem-redis = [
    "io-mem-redis",
]

full = [
    "io-source-s3",
    "io-mem-redis",
]
bench-full = [
    "full",
    "bench-io-mem-redis",
]
