"use strict";(self.webpackChunk_jupytergis_jupytergis_qgis=self.webpackChunk_jupytergis_jupytergis_qgis||[]).push([[4],{4:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var a=r(796),o=r(303),n=r(200),s=r(131),i=r(32),c=r(215),d=r(68),g=r(781);class l{constructor(){this.collaborative=!0,this._disposed=!1}get name(){throw"Not implemented"}get contentType(){throw"Not implemented"}get fileFormat(){return"base64"}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}preferredLanguage(e){return""}createNew(e){return new o.JupyterGISModel({sharedModel:e.sharedModel,languagePreference:e.languagePreference})}}class m extends l{get name(){return"jupytergis-qgzmodel"}get contentType(){return"QGZ"}}class y extends l{get name(){return"jupytergis-qgsmodel"}get contentType(){return"QGS"}}const p=[{id:"jupytergis:qgisplugin",requires:[o.IJupyterGISDocTracker,n.IThemeManager,a.ICollaborativeDrive,o.IJGISExternalCommandRegistryToken,i.ConsolePanel.IContentFactory,s.IEditorServices,c.IRenderMimeRegistry,i.IConsoleTracker],autoStart:!0,activate:async(e,t,r,a,s,i,c,l,p)=>{const u=await(0,g.requestAPI)("jupytergis_qgis/backend-check",{method:"POST",body:JSON.stringify({})}),{installed:G}=u,h=()=>(G||(0,n.showErrorMessage)("QGIS is not installed","QGIS is required to open QGIS files"),G),S=new d.JupyterGISWidgetFactory({name:"JupyterGIS QGS Factory",modelName:"jupytergis-qgsmodel",fileTypes:["QGS"],defaultFor:["QGS"],tracker:t,commands:e.commands,externalCommandRegistry:s,backendCheck:h,manager:e.serviceManager,contentFactory:i,rendermime:l,mimeTypeService:c.mimeTypeService,consoleTracker:p}),F=new d.JupyterGISWidgetFactory({name:"JupyterGIS QGZ Factory",modelName:"jupytergis-qgzmodel",fileTypes:["QGZ"],defaultFor:["QGZ"],tracker:t,commands:e.commands,externalCommandRegistry:s,backendCheck:h,manager:e.serviceManager,contentFactory:i,rendermime:l,mimeTypeService:c.mimeTypeService,consoleTracker:p});e.docRegistry.addWidgetFactory(S),e.docRegistry.addWidgetFactory(F),e.docRegistry.addModelFactory(new y),e.docRegistry.addModelFactory(new m),e.docRegistry.addFileType({name:"QGS",displayName:"QGS",mimeTypes:["application/octet-stream"],extensions:[".qgs",".QGS"],fileFormat:"base64",contentType:"QGS"}),e.docRegistry.addFileType({name:"QGZ",displayName:"QGZ",mimeTypes:["application/octet-stream"],extensions:[".qgz",".QGZ"],fileFormat:"base64",contentType:"QGZ"});const I=()=>new o.JupyterGISDoc;a.sharedModelFactory.registerDocumentFactory("QGS",I),a.sharedModelFactory.registerDocumentFactory("QGZ",I);const T=(a,o)=>{o.context.pathChanged.connect((()=>{t.save(o)})),r.themeChanged.connect(((e,t)=>o.context.model.themeChanged.emit(t))),t.add(o),e.shell.activateById("jupytergis::leftControlPanel"),e.shell.activateById("jupytergis::rightControlPanel")};S.widgetCreated.connect(T),F.widgetCreated.connect(T),console.log("jupytergis:qgisplugin is activated!")}}]}}]);