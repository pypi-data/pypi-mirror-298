{% load static i18n %}
<header class="nxl-header">
  <div class="header-wrapper">
    <!--! [Start] Header Left !-->
    <div class="header-left d-flex align-items-center gap-4">
      <!--! [Start] nxl-head-mobile-toggler !-->
      <a
        href="javascript:void(0);"
        class="nxl-head-mobile-toggler"
        id="mobile-collapse"
      >
        <div class="hamburger hamburger--arrowturn">
          <div class="hamburger-box">
            <div class="hamburger-inner"></div>
          </div>
        </div>
      </a>
      <!--! [Start] nxl-head-mobile-toggler !-->
      <!--! [Start] nxl-navigation-toggle !-->
      <div class="nxl-navigation-toggle">
        <a href="javascript:void(0);" id="menu-mini-button">
          <i class="feather-align-left"></i>
        </a>
        <a
          href="javascript:void(0);"
          id="menu-expend-button"
          style="display: none"
        >
          <i class="feather-arrow-right"></i>
        </a>
      </div>
      <!--! [End] nxl-navigation-toggle !-->
      <!--! [Start] nxl-lavel-mega-menu-toggle !-->
      <div class="nxl-lavel-mega-menu-toggle d-flex d-lg-none">
        <a href="javascript:void(0);" id="nxl-lavel-mega-menu-open">
          <i class="feather-align-left"></i>
        </a>
      </div>
      <!--! [End] nxl-lavel-mega-menu-toggle !-->

      <!--! [Start] nxl-lavel-mega-menu !-->
      <div class="nxl-drp-link nxl-lavel-mega-menu">
        <div class="nxl-lavel-mega-menu-toggle d-flex d-lg-none">
          <a href="javascript:void(0)" id="nxl-lavel-mega-menu-hide">
            <i class="feather-arrow-left me-2"></i>
            <span>{% trans "Back" %}</span>
          </a>
        </div>
        <!--! [Start] nxl-lavel-mega-menu-wrapper !-->
        <div class="nxl-lavel-mega-menu-wrapper d-flex gap-3">
          
        </div>
        <!--! [End] nxl-lavel-mega-menu-wrapper !-->
      </div>
      <!--! [End] nxl-lavel-mega-menu !-->
    </div>
    <!--! [End] Header Left !-->
    <!--! [Start] Header Right !-->
    <div class="header-right ms-auto">
      <div class="d-flex align-items-center">
        <div class="dropdown nxl-h-item nxl-header-language d-none d-sm-flex">
          <a
            href="javascript:void(0);"
            class="nxl-head-link me-0 nxl-language-link"
            data-bs-toggle="dropdown"
            data-bs-auto-close="outside"
          >
        {% get_current_language as LANGUAGE_CODE %}
        {% get_available_languages as LANGUAGES %}

        {% if LANGUAGE_CODE == 'en' %}
            <img
            src="{% static 'assets/vendors/img/flags/4x3/us.svg'%}"
            alt=""
            class="img-fluid wd-20"
            />
        {% elif LANGUAGE_CODE == 'fr' %}
            <img
            src="{% static 'assets/vendors/img/flags/4x3/fr.svg'%}"
            alt=""
            class="img-fluid wd-20"
            />
        {% endif %}
          
          </a>
            <div class="dropdown-menu dropdown-menu-end nxl-h-dropdown nxl-language-dropdown">
                
                <form method="POST" action="{% url 'change_language' %}">
                    
                    {% csrf_token %}
                    <input type="hidden" name="current" value="{{ LANGUAGE_CODE }}">
                    <input type="hidden" name="next" value="{{ request.get_full_path }}">
                    <div class="dropdown-divider mt-0"></div>

                    <select name="language" onchange="this.form.submit()" class="d-none">
                        {% for lang_code, lang_name in LANGUAGES %}
                            <option value="{{ lang_code }}" {% if lang_code == LANGUAGE_CODE %}selected{% endif %}>
                                {{ lang_name }}
                            </option>
                        {% endfor %}
                    </select>

                    <div class="language-items-wrapper">
                        <div class="select-language px-4 py-2 hstack justify-content-between gap-4">
                            <div class="lh-lg">
                                <h6 class="mb-0">Select Language</h6>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="row px-4 pt-3">
                            <div class="col-sm-4 col-6 language_select {% if LANGUAGE_CODE == 'en' %}active{% endif %}">
                                <a href="javascript:void(0);"  onclick="changeLanguage('en')" class="d-flex align-items-center gap-2">
                                    <div class="avatar-image avatar-sm">
                                        <img
                                        src="{% static 'assets/vendors/img/flags/1x1/us.svg'%}"
                                        alt=""
                                        class="img-fluid"
                                        />
                                    </div>
                                    <span>{% trans "English" %}</span>
                                </a>
                            </div>
                            <div class="col-sm-4 col-6 language_select {% if LANGUAGE_CODE == 'fr' %}active{% endif %}">
                                <a href="javascript:void(0);" onclick="changeLanguage('fr')"  class="d-flex align-items-center gap-2">
                                    <div class="avatar-image avatar-sm">
                                        <img
                                            src="{% static 'assets/vendors/img/flags/1x1/fr.svg'%}"
                                            alt=""
                                            class="img-fluid"
                                        />
                                    </div>
                                    <span>{% trans "French" %}</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                </form>
            </div>
        </div>

        <div class="nxl-h-item d-none d-sm-flex">
          <div class="full-screen-switcher">
            <a
              href="javascript:void(0);"
              class="nxl-head-link me-0"
              onclick="$('body').fullScreenHelper('toggle');"
            >
              <i class="feather-maximize maximize"></i>
              <i class="feather-minimize minimize"></i>
            </a>
          </div>
        </div>

        <div class="nxl-h-item dark-light-theme">
          <a href="javascript:void(0);" class="nxl-head-link me-0 dark-button">
            <i class="feather-moon"></i>
          </a>
          <a
            href="javascript:void(0);"
            class="nxl-head-link me-0 light-button"
            style="display: none"
          >
            <i class="feather-sun"></i>
          </a>
        </div>

        <!-- <div class="dropdown nxl-h-item">
                    <a href="javascript:void(0);" class="nxl-head-link me-0" data-bs-toggle="dropdown" role="button" data-bs-auto-close="outside">
                        <i class="feather-clock"></i>
                        <span class="badge bg-success nxl-h-badge">2</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end nxl-h-dropdown nxl-timesheets-menu">
                        <div class="d-flex justify-content-between align-items-center timesheets-head">
                            <h6 class="fw-bold text-dark mb-0">Timesheets</h6>
                            <a href="javascript:void(0);" class="fs-11 text-success text-end ms-auto" data-bs-toggle="tooltip" title="Upcomming Timers">
                                <i class="feather-clock"></i>
                                <span>3 Upcomming</span>
                            </a>
                        </div>
                        <div class="d-flex justify-content-between align-items-center flex-column timesheets-body">
                            <i class="feather-clock fs-1 mb-4"></i>
                            <p class="text-muted">No started timers found yes!</p>
                            <a href="javascript:void(0);" class="btn btn-sm btn-primary">Started Timer</a>
                        </div>
                        <div class="text-center timesheets-footer">
                            <a href="javascript:void(0);" class="fs-13 fw-semibold text-dark">Alls Timesheets</a>
                        </div>
                    </div>
                </div> -->
        <div class="dropdown nxl-h-item mx-2">
          <a
            href="javascript:void(0);"
            data-bs-toggle="dropdown"
            role="button"
            data-bs-auto-close="outside"
          >
            <img
              src="{% static 'assets/images/avatar/1.png'%}"
              alt="user-image"
              class="img-fluid user-avtar me-0"
            />
          </a>
          <div
            class="dropdown-menu dropdown-menu-end nxl-h-dropdown nxl-user-dropdown"
          >
            <div class="dropdown-header">
              <div class="d-flex align-items-center">
                <img
                  src="{% static 'assets/images/avatar/1.png'%}"
                  alt="user-image"
                  class="img-fluid user-avtar"
                />
                <div>
                  <h6 class="text-dark mb-0">{{user}}</h6>
                  <span class="fs-12 fw-medium text-muted">{{user.email}}</span>
                </div>
              </div>
            </div>

            <!-- <div class="dropdown">
                            <a href="javascript:void(0);" class="dropdown-item" data-bs-toggle="dropdown">
                                <span class="hstack">
                                    <i class="wd-10 ht-10 border border-2 border-gray-1 bg-success rounded-circle me-2"></i>
                                    <span>Active</span>
                                </span>
                                <i class="feather-chevron-right ms-auto me-0"></i>
                            </a>
                            <div class="dropdown-menu">
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-10 ht-10 border border-2 border-gray-1 bg-warning rounded-circle me-2"></i>
                                        <span>Always</span>
                                    </span>
                                </a>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-10 ht-10 border border-2 border-gray-1 bg-success rounded-circle me-2"></i>
                                        <span>Active</span>
                                    </span>
                                </a>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-10 ht-10 border border-2 border-gray-1 bg-danger rounded-circle me-2"></i>
                                        <span>Bussy</span>
                                    </span>
                                </a>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-10 ht-10 border border-2 border-gray-1 bg-info rounded-circle me-2"></i>
                                        <span>Inactive</span>
                                    </span>
                                </a>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-10 ht-10 border border-2 border-gray-1 bg-dark rounded-circle me-2"></i>
                                        <span>Disabled</span>
                                    </span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-10 ht-10 border border-2 border-gray-1 bg-primary rounded-circle me-2"></i>
                                        <span>Cutomization</span>
                                    </span>
                                </a>
                            </div>
                        </div> -->

            <!-- <div class="dropdown-divider"></div> -->

            <!-- <div class="dropdown">
                            <a href="javascript:void(0);" class="dropdown-item" data-bs-toggle="dropdown">
                                <span class="hstack">
                                    <i class="feather-dollar-sign me-2"></i>
                                    <span>Subscriptions</span>
                                </span>
                                <i class="feather-chevron-right ms-auto me-0"></i>
                            </a>
                            <div class="dropdown-menu">
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-5 ht-5 bg-gray-500 rounded-circle me-3"></i>
                                        <span>Plan</span>
                                    </span>
                                </a>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-5 ht-5 bg-gray-500 rounded-circle me-3"></i>
                                        <span>Billings</span>
                                    </span>
                                </a>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-5 ht-5 bg-gray-500 rounded-circle me-3"></i>
                                        <span>Referrals</span>
                                    </span>
                                </a>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-5 ht-5 bg-gray-500 rounded-circle me-3"></i>
                                        <span>Payments</span>
                                    </span>
                                </a>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-5 ht-5 bg-gray-500 rounded-circle me-3"></i>
                                        <span>Statements</span>
                                    </span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="javascript:void(0);" class="dropdown-item">
                                    <span class="hstack">
                                        <i class="wd-5 ht-5 bg-gray-500 rounded-circle me-3"></i>
                                        <span>Subscriptions</span>
                                    </span>
                                </a>
                            </div>
                        </div> -->

            <!-- <div class="dropdown-divider"></div> -->

            <a href="{% url 'profile' %}" class="dropdown-item">
              <i class="feather-user"></i>
              <span>{% trans "Profile Details" %}</span>
            </a>
            <a href="{% url 'change_password' %}" class="dropdown-item">
              <i class="feather-lock"></i>
              <span>{% trans "Change Password" %}</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="{% url 'logout' %}" class="dropdown-item">
              <i class="feather-log-out"></i>
              <span>{% trans "Logout" %}</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <!--! [End] Header Right !-->
  </div>
</header>

<script>
    function changeLanguage(langCode) {
        var select = document.querySelector('select[name="language"]');
        select.value = langCode;
        select.form.submit();
    }
</script>
