Metadata-Version: 2.1
Name: Flask-Loopback
Version: 1.6.0.0a2
Summary: Library for faking HTTP requests using flask applications without actual network operations
Home-page: https://github.com/vmalloc/flask-loopback
Author: Rotem Yaari
Author-email: vmalloc@gmail.com
License: BSD3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Description-Content-Type: text/markdown
License-File: LICENSE
License-File: AUTHORS
Requires-Dist: requests
Requires-Dist: Flask
Requires-Dist: six
Requires-Dist: URLObject
Requires-Dist: werkzeug >=1.0.0
Requires-Dist: unittest2 ; (python_version<'2.7')
Requires-Dist: contextlib2 ; (python_version<'3.3')
Provides-Extra: testing
Requires-Dist: pytest ; extra == 'testing'
Requires-Dist: astroid ~=1.5.3 ; (python_version == "2.7") and extra == 'testing'
Requires-Dist: pylint ~=1.7.2 ; (python_version == "2.7") and extra == 'testing'
Requires-Dist: astroid >=2.0 ; (python_version >= "3.4") and extra == 'testing'
Requires-Dist: pylint ~=2.3.1 ; (python_version >= "3.4") and extra == 'testing'

![Build Status](https://secure.travis-ci.org/vmalloc/Flask-Loopback.png) &nbsp; ![Version](https://img.shields.io/pypi/v/Flask-Loopback.svg)

Overview
========

Flask-Loopback enables you to use written Flask applications in your code to mock actual web services. This is useful if you are writing a client that will use an existing web service and would like to know how well it will interact with the real thing.

Flask-Loopback does this without actually sending HTTP requests over the network, but rather through stubbing the `requests` package so that only requests directed at your mock will arrive at their destination.

Doing this is very simple. You probably already have a flask application somewhere that you'd like to use

```python
# myapp.py
>>> import flask

>>> app = flask.Flask(__name__)

>>> @app.route("/some/path")
... def hello():
...     return "hello!"

```

When you want to actually use it, you activate the loopback on a specified address:

```python
>>> import requests
>>> from flask_loopback import FlaskLoopback

>>> loopback = FlaskLoopback(app)

>>> with loopback.on(("some-address.com", 80)):
...    print(requests.get("http://some-address.com/some/path").content.decode("utf-8"))
hello!

```

To help you perform more actions before and after requests, you can register request context functions to be called around actual requests (this is in addition to the default handlers provided by Flask):

```python
>>> from contextlib import contextmanager

>>> @loopback.register_request_context_handler
... @contextmanager
... def request_handler(request):
...     # do something before request handling
...     yield
...     # do something after request handling

```

SSL
===

SSL is disabled by default, but you can easily activate it:

```python
>>> with loopback.on(("some-address.localdomain", 443)):
...    requests.get("https://some-address.localdomain/some/path") # doctest: +IGNORE_EXCEPTION_DETAIL
Traceback (most recent call last):
	...
SSLError
>>> with loopback.on(("some-address.localdomain", 443), ssl=True):
...    requests.get("https://some-address.localdomain/some/path") # doctest: +IGNORE_EXCEPTION_DETAIL
<Response [200]>

```



Licence
=======

BSD3 (See `LICENSE`)

