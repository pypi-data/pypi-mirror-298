(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6050],{47201:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection/new",function(){return n(73002)}])},38615:function(e,t,n){"use strict";n.d(t,{Tg:function(){return l}});var r=n(24246),i=n(44296),s=n(96451);let l=e=>(0,i.C)(s.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:n}=e;return l(t)?(0,r.jsx)(r.Fragment,{children:n}):null}},81563:function(e,t,n){"use strict";var r=n(24246),i=n(13054),s=n(27378);t.Z=e=>{var t;let{disabled:n=!1,enableSorting:l=!0,hasClear:a=!0,label:o,list:d,menuButtonProps:c,onChange:u,selectedValue:x}=e,[p,h]=(0,s.useState)(!1),m=()=>{h(!1)},f=null===(t=[...d].find(e=>{let[,t]=e;return t.value===x}))||void 0===t?void 0:t[0];return(0,r.jsxs)(i.v2r,{isLazy:!0,onClose:m,onOpen:()=>{h(!0)},strategy:"fixed",children:[(0,r.jsx)(i.j2t,{"aria-label":null!=f?f:o,as:i.zxk,color:f?"complimentary.500":void 0,disabled:n,fontWeight:"normal",rightIcon:(0,r.jsx)(i.mCO,{}),size:"sm",variant:"outline",_active:{bg:"none"},_hover:{bg:"none"},...c,"data-testid":"select-dropdown-btn",children:(0,r.jsx)(i.xvT,{noOfLines:1,wordBreak:"break-all",children:null!=f?f:o})}),p?(0,r.jsxs)(i.qyq,{lineHeight:"1rem",p:"0","data-testid":"select-dropdown-list",children:[a&&(0,r.jsx)(i.kCb,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:(0,r.jsx)(i.zxk,{onClick:()=>{u(void 0),m()},size:"xs",variant:"outline",children:"Clear"})}),(l?[...d].sort():[...d]).map(e=>{let[t,n]=e;return(0,r.jsx)(i.ua7,{"aria-label":n.toolTip,hasArrow:!0,label:n.toolTip,placement:"auto-start",openDelay:500,shouldWrapChildren:!0,children:(0,r.jsx)(i.sNh,{color:x===n.value?"complimentary.500":void 0,isDisabled:n.isDisabled,onClick:()=>u(n.value),paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,r.jsx)(i.xvT,{fontSize:"0.75rem",children:t})})},t)})]}):null]})}},16781:function(e,t,n){"use strict";n.d(t,{MA:function(){return a},Vo:function(){return d},t5:function(){return o}});var r=n(24246),i=n(13054);let s=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsx)("strong",{children:"Success:"})," ",t]})},l=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",t]})},a={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},o=e=>{let t=(0,r.jsx)(s,{children:e});return{...a,description:t}},d=e=>{let t=(0,r.jsx)(l,{children:e});return{...a,description:t,status:"error"}}},50204:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(24246),i=n(13054),s=n(27378),l=n(44833),a=n(45007),o=n(60136),d=n(16781),c=n(69477),u=n(89319),x=n(52020),p=n(21618);let{reducer:h}=(0,u.oM)({name:"connectorTemplate",initialState:{},reducers:{}}),{useRegisterConnectorTemplateMutation:m}=p.u.injectEndpoints({endpoints:e=>({registerConnectorTemplate:e.mutation({query:e=>{let t=new FormData;return t.append("file",e),{url:"".concat(x.o4,"/register"),method:"POST",body:t}},invalidatesTags:()=>["Connection Type"]})})});var f=e=>{let{isOpen:t,onClose:n,testId:u="connector-template-modal"}=e,x=(0,a.I0)(),[p,h]=(0,s.useState)(null),f=(0,i.pmc)(),{getRootProps:j,getInputProps:g,isDragActive:v}=(0,l.uI)({onDrop:e=>{var t;if("zip"!==(null===(t=e[0].name.split(".").pop())||void 0===t?void 0:t.toLowerCase())){f((0,d.Vo)("Only zip files are allowed."));return}h(e[0])}}),[b,{isLoading:y}]=m(),{refetch:C}=(0,c.$I)({search:""},{skip:!1}),T=async()=>{if(p)try{var e;await b(p).unwrap(),f((0,d.t5)("Integration template uploaded successfully."));let{data:t}=await C();x((0,c.fP)(null!==(e=null==t?void 0:t.items)&&void 0!==e?e:[])),n()}catch(e){f((0,d.Vo)((0,o.e$)(e)))}finally{h(null)}};return(0,r.jsxs)(i.u_l,{isOpen:t,onClose:n,size:"2xl",children:[(0,r.jsx)(i.ZAr,{}),(0,r.jsxs)(i.hzk,{textAlign:"left",p:2,"data-testid":u,children:[(0,r.jsx)(i.xBx,{children:"Upload integration template"}),(0,r.jsxs)(i.fef,{children:[(0,r.jsx)(i.xvT,{fontSize:"sm",mb:4,children:"Drag and drop your integration template zip file here, or click to browse your files."}),(0,r.jsxs)(i.xuv,{...j(),bg:v?"gray.100":"gray.50",border:"2px dashed",borderColor:v?"gray.300":"gray.200",borderRadius:"md",cursor:"pointer",minHeight:"150px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,r.jsx)("input",{...g()}),p?(0,r.jsx)(i.xvT,{children:p.name}):v?(0,r.jsx)(i.xvT,{children:"Drop the file here..."}):(0,r.jsx)(i.xvT,{children:"Click or drag and drop your file here."})]}),(0,r.jsx)(i.xvT,{fontSize:"sm",mt:4,children:"An integration template zip file must include a SaaS config and dataset, but may also contain an icon (.svg) as an optional file."})]}),(0,r.jsx)(i.mzw,{children:(0,r.jsxs)(i.hE2,{size:"sm",spacing:"2",width:"100%",display:"flex",justifyContent:"right",children:[(0,r.jsx)(i.zxk,{variant:"outline",onClick:n,"data-testid":"cancel-btn",isDisabled:y,children:"Cancel"}),(0,r.jsx)(i.zxk,{colorScheme:"primary",type:"submit",isDisabled:!p||y,onClick:T,"data-testid":"submit-btn",children:"Submit"})]})})]})]})}},73002:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(24246),i=n(69728),s=n(48382),l=n(13054),a=n(86677),o=n(27378),d=n(45007),c=n(44296),u=n(73485),x=n(11032),p=n(94167),h=n(38615),m=n(50204),f=n(19686),j=n(81563),g=n(35894),v=e=>{let{width:t}=e,n=(0,d.I0)(),s=(0,o.useRef)(!1),a=(0,c.C)(i.pw);return(0,o.useEffect)(()=>(s.current=!0,()=>{n((0,i.zq)(g.gA)),s.current=!1}),[n]),(0,r.jsx)(l.xuv,{children:(0,r.jsx)(j.Z,{enableSorting:!1,hasClear:!1,label:"Show all connectors",list:g.yI,menuButtonProps:{width:t},onChange:e=>{n((0,i.zq)(e||g.gA))},selectedValue:a.system_type||g.gA})})},b=n(79894),y=n.n(b),C=e=>{let{items:t}=e;return(0,r.jsx)(l.MIq,{columns:4,spacingX:"16px",spacingY:"16px",children:t.map(e=>(0,r.jsx)(y(),{href:{pathname:window.location.pathname,query:{step:2,connectorType:JSON.stringify(e)}},children:(0,r.jsx)(l.xuv,{boxShadow:"base",borderRadius:"5px",maxWidth:"331px",overflow:"hidden",_hover:{boxShadow:"lg",cursor:"pointer"},"data-testid":"".concat(e.identifier,"-item"),children:(0,r.jsxs)(l.kCb,{alignItems:"center",justifyContent:"start",pl:"24px",pr:"24px",color:"gray.700",fontSize:"14px",fontStyle:"normal",fontWeight:"600",lineHeight:"20px",h:"80px",children:[(0,r.jsx)(s.Z,{data:e}),(0,r.jsx)(l.xvT,{ml:"12px",children:e.human_readable})]})})},e.identifier))})},T=()=>{let e=(0,d.I0)(),t=(0,o.useRef)(!1),{step:n}=(0,c.C)(i.ZZ),s=(0,c.C)(i.pw),{data:a,isFetching:u,isLoading:x,isSuccess:j}=(0,i.$I)(s),[g,b]=(0,o.useState)(!1),y=(0,o.useCallback)(t=>{(0===t.target.value.length||t.target.value.length>1)&&e((0,i.qP)(t.target.value))},[e]),T=(0,o.useMemo)(()=>(0,p.Ds)(y,250),[y]),S=(0,o.useMemo)(()=>(null==a?void 0:a.items)&&[...a.items].sort((e,t)=>e.human_readable>t.human_readable?1:-1),[a]);return(0,o.useEffect)(()=>(t.current=!0,()=>{e((0,i.qP)("")),t.current=!1}),[e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.kCb,{minWidth:"fit-content",children:(0,r.jsx)(l.xuv,{color:"gray.700",fontSize:"14px",maxHeight:"80px",maxWidth:"474px",mb:"24px",children:n.description})}),(0,r.jsxs)(l.kCb,{alignItems:"center",gap:"4",mb:"24px",minWidth:"fit-content",children:[(0,r.jsx)(v,{}),(0,r.jsxs)(l.BZy,{size:"sm",children:[(0,r.jsx)(l.Z8_,{pointerEvents:"none",children:(0,r.jsx)(l.PTu,{color:"gray.300",h:"17px",w:"17px"})}),(0,r.jsx)(l.IIB,{autoComplete:"off",autoFocus:!0,borderRadius:"md",name:"search",onChange:T,placeholder:"Search integrations",size:"sm",type:"search"})]}),(0,r.jsx)(h.ZP,{scopes:[f.Sh.CONNECTOR_TEMPLATE_REGISTER],children:(0,r.jsx)(l.zxk,{colorScheme:"primary",type:"submit",minWidth:"auto","data-testid":"upload-btn",size:"sm",onClick:()=>{b(!0)},children:"Upload connector"})})]}),(0,r.jsx)(m.Z,{isOpen:g,onClose:()=>b(!1)}),(u||x)&&(0,r.jsx)(l.M5Y,{children:(0,r.jsx)(l.$jN,{})}),j&&S?(0,r.jsx)(C,{items:S}):null]})},S=n(36848),k=n(59201),I=n(4894),w=n(89468),_=()=>{let e=(0,d.I0)(),t=(0,o.useRef)(!1),[n,s]=(0,o.useState)(!1),{connection:a,connectionOption:u}=(0,c.C)(i.ZZ),x=g.IM.find(e=>e.type===(null==u?void 0:u.type)),[p,h]=(0,o.useState)(null==x?void 0:x.options[0]),m=()=>{s(!0)},j=(0,o.useMemo)(()=>()=>{let e=[];return(null==x?void 0:x.options)&&x.options.forEach(t=>{let n;switch(t){case g.H5.CONNECTOR_PARAMETERS:n={label:t,content:(0,r.jsx)(k.s,{onConnectionCreated:m})};break;case g.H5.DATASET_CONFIGURATION:n=(null==a?void 0:a.key)?{label:t,content:(0,r.jsx)(I.Z,{})}:void 0;break;case g.H5.DSR_CUSTOMIZATION:n=(null==a?void 0:a.key)?{label:t,content:(0,r.jsx)(w.Z,{})}:void 0}n&&e.push(n)}),e},[null==a?void 0:a.key,null==x?void 0:x.options]),v=(0,o.useCallback)(t=>{switch(t){case g.H5.DATASET_CONFIGURATION:case g.H5.DSR_CUSTOMIZATION:e((0,i.nj)(g.Ss[3]));break;case g.H5.CONNECTOR_PARAMETERS:default:e((0,i.nj)(g.Ss[2]))}h(t)},[e]);return(0,o.useEffect)(()=>(t.current=!0,()=>{t.current=!1,e((0,i.mc)())}),[e]),(0,o.useEffect)(()=>{(null==a?void 0:a.key)&&(v((null==u?void 0:u.type)!==f.Zi.MANUAL?g.H5.DATASET_CONFIGURATION:g.H5.DSR_CUSTOMIZATION),n&&s(!1))},[n,null==a?void 0:a.key,null==u?void 0:u.type,null==x?void 0:x.options,v]),(0,r.jsx)(l.gCW,{alignItems:"stretch",gap:"18px",children:(0,r.jsx)(S.Z,{data:j(),flexGrow:1,index:null==x?void 0:x.options.findIndex(e=>e===p),isLazy:!0})})},A=n(99377),E=()=>{let e=(0,d.I0)(),t=(0,a.useRouter)(),{connectorType:n,step:p}=t.query,{connection:h,connectionOption:m,step:f}=(0,c.C)(i.ZZ);(0,o.useEffect)(()=>{if(n&&e((0,i.yA)(JSON.parse(n))),t.query.step){let t=g.Ss.find(e=>e.stepId===Number(p));e((0,i.nj)(t||g.Ss[1]))}return!t.query.id&&(null==h?void 0:h.key)&&(0,A.S)(h.key,f.href),()=>{}},[null==h?void 0:h.key,n,p,e,t.query.id,t.query.step,f.href]);let j=(0,o.useCallback)(e=>{let t="";switch(e.stepId){case 2:case 3:t=e.label.replace("{identifier}",m.human_readable);break;default:t=e.label}return t},[m]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{backPath:x.JR}),(0,r.jsx)(l.X6q,{fontSize:"2xl",fontWeight:"semibold",maxHeight:"40px",mb:"4px",whiteSpace:"nowrap",children:(0,r.jsxs)(l.xuv,{alignItems:"center",display:"flex",children:[m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{data:m}),(0,r.jsx)(l.xvT,{ml:"8px",children:j(f)})]}),!m&&(0,r.jsx)(l.xvT,{children:j(f)})]})}),(()=>{switch(f.stepId){case 1:default:return(0,r.jsx)(T,{});case 2:case 3:return(0,r.jsx)(_,{})}})()]})},O=n(73025),z=()=>(0,r.jsx)(O.Z,{children:(0,r.jsx)(E,{})})}},function(e){e.O(0,[3005,4833,9256,3273,2888,9774,179],function(){return e(e.s=47201)}),_N_E=e.O()}]);