{"version":3,"file":"extension.js","names":["ActionView","Spina","spina","RB","Actions","events","waitIt","e","preventDefault","stopPropagation","confirm","gettext","page","PageManager","getPage","pageModel","model","pendingReview","get","ready","set","bodyTop","shipIt","comment","createGeneralComment","undefined","text","save","publish","reviewRequest","navigateTo","ExtendedApprovalExtension"],"sources":["../../../../../extended_approval/static/js/extension.ts"],"sourcesContent":["const ActionView = Spina.spina(class extends RB.Actions.ActionView {\n    static events = {\n        'click': 'waitIt',\n    }\n\n    async waitIt(e?: JQuery.ClickEvent) {\n        if (e) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n\n        if (confirm(_`Are you sure you want to ShipIt?`)) {\n            const page = RB.PageManager.getPage();\n            const pageModel = page.model;\n\n            const pendingReview = pageModel.get('pendingReview')\n            await pendingReview.ready();\n            pendingReview.set({\n                bodyTop: _`Ship It!`,\n                shipIt: true,\n            });\n\n            const comment = pendingReview.createGeneralComment(undefined, true);\n            comment.set({\n                text: _`Wait for CI!`,\n            });\n            await comment.save();\n\n            await pendingReview.publish();\n            const reviewRequest = pageModel.get('reviewRequest');\n            RB.navigateTo(reviewRequest.get('reviewURL'));\n        }\n\n        return false;\n    }\n});\n\nExtendedApprovalExtension = {\n    ActionView,\n}\n"],"mappings":";;AAAA,MAAMA,UAAU,GAAGC,KAAK,CAACC,KAAK,CAAC,cAAcC,EAAE,CAACC,OAAO,CAACJ,UAAU,CAAC;EAC/D,OAAOK,MAAM,GAAG;IACZ,OAAO,EAAE;EACb,CAAC;EAED,MAAMC,MAAMA,CAACC,CAAqB,EAAE;IAChC,IAAIA,CAAC,EAAE;MACHA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;IACvB;IAEA,IAAIC,OAAO,CAAAC,OAAA,oCAAoC,CAAC,EAAE;MAC9C,MAAMC,IAAI,GAAGT,EAAE,CAACU,WAAW,CAACC,OAAO,CAAC,CAAC;MACrC,MAAMC,SAAS,GAAGH,IAAI,CAACI,KAAK;MAE5B,MAAMC,aAAa,GAAGF,SAAS,CAACG,GAAG,CAAC,eAAe,CAAC;MACpD,MAAMD,aAAa,CAACE,KAAK,CAAC,CAAC;MAC3BF,aAAa,CAACG,GAAG,CAAC;QACdC,OAAO,EAAAV,OAAA,YAAa;QACpBW,MAAM,EAAE;MACZ,CAAC,CAAC;MAEF,MAAMC,OAAO,GAAGN,aAAa,CAACO,oBAAoB,CAACC,SAAS,EAAE,IAAI,CAAC;MACnEF,OAAO,CAACH,GAAG,CAAC;QACRM,IAAI,EAAAf,OAAA;MACR,CAAC,CAAC;MACF,MAAMY,OAAO,CAACI,IAAI,CAAC,CAAC;MAEpB,MAAMV,aAAa,CAACW,OAAO,CAAC,CAAC;MAC7B,MAAMC,aAAa,GAAGd,SAAS,CAACG,GAAG,CAAC,eAAe,CAAC;MACpDf,EAAE,CAAC2B,UAAU,CAACD,aAAa,CAACX,GAAG,CAAC,WAAW,CAAC,CAAC;IACjD;IAEA,OAAO,KAAK;EAChB;AACJ,CAAC,CAAC;AAEFa,yBAAyB,GAAG;EACxB/B;AACJ,CAAC","ignoreList":[]}